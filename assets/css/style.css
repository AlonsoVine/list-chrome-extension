/* =============================================================
   Base de variables existentes (copia de tu proyecto)
   - NO se modifica la paleta original
   ============================================================= */
:root {
  --primer-color: #799eff;
  --segundo-color: #feffc4;
  --tercero-color: #ffde63;
  --cuarto-color: #ffbc4c;
}

/* =============================================================
   Variables nuevas (sin colores hardcodeados adicionales)
   - Solo tokens de espaciado, radios y derivados por mix
   - Para colores se referencian tus variables existentes
   ============================================================= */
:root {
  --radius: 12px;
  --gap-1: 8px;
  --gap-2: 12px;
  --gap-3: 16px;

  /* Derivados con color-mix entre tus colores */
  --bg-elevated: color-mix(
    in oklab,
    var(--segundo-color) 90%,
    var(--tercero-color) 10%
  );
  --border-color: color-mix(
    in oklab,
    var(--cuarto-color) 30%,
    var(--segundo-color) 70%
  );
  --btn-hover: color-mix(
    in oklab,
    var(--primer-color) 85%,
    var(--tercero-color) 15%
  );
  --focus: color-mix(
    in oklab,
    var(--primer-color) 55%,
    var(--tercero-color) 45%
  );
  --muted: color-mix(
    in oklab,
    var(--cuarto-color) 40%,
    var(--segundo-color) 60%
  );

  /* Nuevo: color de texto principal derivado para buena legibilidad */
  --text-color: color-mix(
    in oklab,
    var(--cuarto-color) 60%,
    var(--primer-color) 40%
  );

  /* Solicitud: color específico para el botón Añadir */
  --btn-add: #5b65c8; /* morado solicitado */
  --btn-add-contrast: #ffffff; /* contraste en el botón de añadir */
  /* Texto fuerte (negro) solicitado para items y botones eliminar */
  --text-strong: #000000;

  /* Nuevas: mejor legibilidad de input/placeholder */
  --input-text: color-mix(
    in oklab,
    var(--text-strong) 85%,
    var(--segundo-color) 15%
  );
  --placeholder-color: color-mix(
    in oklab,
    var(--text-strong) 60%,
    var(--segundo-color) 40%
  );

  /* Tamaño de iconos para acciones */
  --icon-size: 16px;

  /* Tono rojo-crema para hover de eliminar */
  --danger: #d43245; /* rojo frambuesa */
  --danger-cream: color-mix(
    in oklab,
    var(--danger) 60%,
    var(--segundo-color) 40%
  );
}

/* =============================================================
   Layout del popup (Chrome ajusta tamaño al contenido)
   - Objetivo ancho 380–420px y alto mínimo ~520px
   - Tipografía de sistema
   ============================================================= */
html,
body {
  height: 100%;
}

body {
  margin: 0;
  /* Fondo del popup: primer color solicitado */
  background: var(--primer-color);
  /* Texto principal derivado para legibilidad sobre fondos claros */
  color: var(--text-color);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
    sans-serif;
  width: clamp(380px, 92vw, 820px);
  min-height: 720px;
  max-height: 800px;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* Contenedor principal del popup */
.popup {
  padding: var(--gap-3);
  display: grid;
  gap: var(--gap-3);
  /* Mantener el footer al fondo del popup */
  min-height: 100%;
  height: 100vh; /* fuerza layout basado en el alto del popup */
  grid-template-rows: auto auto 1fr auto; /* header, form, lista (crece/scroll), footer */
}

/* =============================================================
   Cabecera
   - Pequeño icono + título
   ============================================================= */
.header {
  display: flex;
  align-items: center;
  gap: var(--gap-2);
  /* Fondo del header con leve gradiente derivado */
  background: linear-gradient(
    90deg,
    color-mix(in oklab, var(--cuarto-color) 92%, var(--tercero-color) 8%),
    color-mix(in oklab, var(--cuarto-color) 80%, var(--tercero-color) 20%)
  );
  padding: var(--gap-2);
  border-radius: var(--radius);
  width: 100%;
  position: relative;
}
.header__icon {
  width: 30px;
  height: 30px;
  opacity: 0.9;
}
.header__title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
  letter-spacing: 0.2px;
  color: var(--text-strong);
  background: color-mix(in oklab, var(--segundo-color) 85%, var(--cuarto-color) 15%);
  padding: 6px 12px;
  border-radius: calc(var(--radius) - 6px);
  /* Sombra convertida en "línea" inferior + sombra suave */
  box-shadow:
    0 5px 0 color-mix(in oklab, var(--primer-color) 25%, var(--cuarto-color) 75%),
    6px 8px 14px color-mix(in oklab, var(--text-strong) 12%, transparent);
  position: relative;
}

/* Eliminamos la pseudo-línea: ahora la "línea" inferior es el box-shadow */
.header__title::after { content: none; }

/* Marco para el título en color cuarto */
/* El fondo ahora lo lleva .header para ocupar todo el ancho */

/* =============================================================
   Formulario (respetando IDs: #formTarea y #nombreTarea)
   - Una fila con input expandible y botón primario
   ============================================================= */
#formTarea {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--gap-2);
}

#nombreTarea {
  appearance: none;
  border: 1px solid var(--border-color);
  background: var(--bg-elevated);
  border-radius: var(--radius);
  padding: 10px 12px;
  min-height: 40px;
  /* Texto del input más visible */
  color: var(--input-text);
}

#nombreTarea::placeholder {
  /* Placeholder más legible (negro atenuado) */
  color: var(--placeholder-color);
}

#nombreTarea:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}

button,
[type="button"],
[type="submit"] {
  font: inherit;
  border-radius: var(--radius);
  border: none;
  padding: 10px 14px;
  min-height: 40px;
  cursor: pointer;
}

button[type="submit"] {
  /* Botón Añadir con color solicitado */
  background: var(--btn-add);
  color: var(--btn-add-contrast);
  transition: transform 0.05s ease, background-color 0.2s ease,
    box-shadow 0.2s ease;
  box-shadow: 0 1px 2px
    color-mix(in oklab, var(--cuarto-color) 25%, transparent);
}

button[type="submit"]:hover {
  background: color-mix(in oklab, var(--btn-add) 88%, white 12%);
}
button[type="submit"]:active {
  transform: translateY(0.5px);
}
button[type="submit"]:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--btn-add) 55%, white 45%);
  outline-offset: 2px;
}
button[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
}

/* =============================================================
   Lista de tareas (respetando #listaTareas)
   - Tarjetas ligeras con botones discretos
   ============================================================= */
#listaTareas {
  list-style: none;
  margin: 0;
  /* Contenedor de la lista con fondo del tercer color */
  background: var(--tercero-color);
  padding: var(--gap-2);
  display: flex; /* lista vertical, evita estirar un único item */
  flex-direction: column;
  gap: var(--gap-2);
  border: 1px solid var(--border-color);
  border-radius: var(--radius);
  /* Solo scrollea la lista; el footer queda visible */
  overflow: auto;
  min-height: 0; /* importante para contenedores grid/popup */
}

/* Footer del popup: discreto y con el tono del botón Añadir */
.footer {
  margin-top: var(--gap-3);
  background: color-mix(in oklab, var(--btn-add) 90%, white 10%);
  color: var(--btn-add-contrast);
  border-radius: var(--radius);
  padding: 6px 10px;
  margin-left: 25px;
  margin-right: 25px;
  text-align: center;
  font-size: 12px;
  position: sticky;
  bottom: 0; /* queda pegado abajo aunque la lista sea larga */
  z-index: 5;
  box-shadow: 0 -2px 6px color-mix(in oklab, var(--btn-add) 25%, transparent);
}

.footer a {
  color: inherit;
  text-decoration: underline;
  text-underline-offset: 2px;
}

.footer a:hover {
  text-decoration-thickness: 2px;
}

#listaTareas li {
  display: flex; /* altura natural */
  align-items: center; /* centrado vertical en 1 línea */
  justify-content: space-between;
  gap: var(--gap-2);
  /* Cada item con el segundo color */
  background: var(--segundo-color);
  border: 1px solid var(--border-color);
  border-radius: var(--radius);
  padding: 6px 12px; /* compacto */
  line-height: 1.2;
  color: var(--text-strong); /* texto negro en items */
  /* Permitir que textos largos envuelvan en varias líneas */
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}

#listaTareas li:focus-within {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}

#listaTareas li button {
  /* Botón eliminar destacado en color cuarto */
  background-color: var(--cuarto-color);
  border: 1px solid
    color-mix(in oklab, var(--cuarto-color) 60%, var(--tercero-color) 40%);
  color: var(--text-strong); /* texto del botón eliminar en negro */
  padding: 6px 10px;
  border-radius: calc(var(--radius) - 4px);
  min-height: 32px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  gap: 0; /* el icono va como background, no necesitamos separación extra */
  margin-left: auto; /* mantener el botón a la derecha */
  flex-shrink: 0; /* evitar que el botón se comprima */
  flex: 0 0 auto; /* y que no crezca ni se estire */
  align-self: center; /* centrar verticalmente respecto al li */

  /* Icono como background para controlar perfectamente el espacio */
  background-image: url("../img/minimalist trash.png"),
    url("../img/minimalist trash.png");
  background-repeat: no-repeat;
  background-position: 10px center;
  background-size: var(--icon-size) var(--icon-size);
  padding-left: calc(
    10px + var(--icon-size) + 6px
  ); /* icono + margen interno */
  white-space: nowrap; /* etiqueta en una sola línea */
}

/* Icono en el botón eliminar usando imagen local
   - Si el archivo tiene otro nombre (p.ej. "minimalist trash.png"),
     ajusta la ruta en url("../img/…").
   - Ruta relativa desde assets/css/ → ../img/
*/
/* Eliminamos el pseudo-elemento: el icono ahora es fondo del botón */
#listaTareas li button::before {
  content: none;
}

/* Restaurar color del primer carácter ahora que el texto no incluye emoji */
#listaTareas li button::first-letter {
  color: inherit;
}

#listaTareas li button:hover {
  /* Cambiamos solo el color de fondo para no borrar el background-image */
  background-color: var(--danger-cream);
  border-color: color-mix(
    in oklab,
    var(--danger) 60%,
    var(--tercero-color) 40%
  );
}

#listaTareas li button:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}

/* =============================================================
   Utilidad accesible: texto solo para lectores de pantalla
   ============================================================= */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* =============================================================
   Preferencias del usuario
   ============================================================= */
@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
  }
}

/* =============================================================
   Notas de implementación
   - Mantengo IDs y estructura para compatibilidad con assets/js/script.js
   - El ancho/alto están dentro del rango recomendado para popup
   - No hay estilos inline ni dependencias externas
   ============================================================= */
